(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{408:function(t,e,n){"use strict";n.r(e);var i=n(510),o=n(455);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var r=n(0),u=Object(r.a)(o.default,i.a,i.b,!1,null,null,null);e.default=u.exports},415:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(6)),o=a(n(20));function a(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){var t=this;return{searchFilter:{},tableInfo:{data:[],rowHandle:{fixed:"right",width:"90px",custom:[{text:"删除",type:"text",size:"mini",emit:"cutOff"}]},columns:[],pagination:{currentPage:1,pageSize:10,total:0,background:!0,layout:"total,-> , prev, pager, next"},events:{modify:function(e){t.$refs.editSimplePopup.handleCreate(JSON.parse((0,o.default)(e.row)))},otterEmit:function(e){t.otterEmitFn(e.row)},cutOff:function(e){t.$confirm("此操作将删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.HTTPCommon.updateFn({id:e.row.id,deleteFlag:1}).then((function(e){t.$message.success("操作成功"),t.getList()})).catch((function(t){}))})).catch((function(){}))},view:function(e){t.lookView(e)}}},editPopupInfo:{drawer:{attrs:{title:"新增",direction:"rtl"},events:{beforeClose:function(t){console.log("关闭弹框")}}},form:{width:"120px",inline:!0,items:[]},events:{confirm:function(e){console.log("修改点击确定按钮==>",e),t.modifyOrganization(e)},cancel:function(){t.$refs.editSimplePopup.handleClose()}}}}},created:function(){this.initParams()},mounted:function(){this.getList()},methods:{initParams:function(){var t=localStorage.getItem("organization");if(this.searchFilter={parentId:1},t){var e=JSON.parse(t);this.searchFilter.spaceId=e.id}},lookView:function(t){console.log(t)},paginationCurrentChange:function(t){this.tableInfo.pagination.currentPage=t,this.getList()},getList:function(){var t=this,e=(0,i.default)({},this.tableInfo.pagination,this.searchFilter);this.HTTPCommon.getList(e).then((function(e){t.tableInfo.pagination.total=e.total,t.tableInfo.pagination.currentPage=e.currentPage,t.tableInfo.pagination.pageSize=e.pageSize,t.tableInfo.data=e.data||[]}))},modifyOrganization:function(t){var e=this;this.HTTPCommon.insertFn(t).then((function(t){e.getList()})).catch((function(t){}))},addPm:function(){this.$refs.editSimplePopup.handleCreate()},tableKeyToHump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.key=t.key.replace(/\_(\w)/g,(function(t,e){return e.toUpperCase()})),t.minWidth=t.minWidth||"100",t.align=t.align||"center",t.isNoEdit||(t.label=t.label||t.title,t.props=t.props||t.key,t.type=t.type||"input"),(0,i.default)({},t)}))}}}},428:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(30),a=(i=o)&&i.__esModule?i:{default:i};e.default={getList:function(t){return(0,a.default)({url:"/lamp/atom/service/operator/connection/queryConnections",method:"post",data:t})},updateFn:function(t){return(0,a.default)({url:"/lamp/atom/service/operator/connection/updateConnection",method:"post",data:t})},insertFn:function(t){return(0,a.default)({url:"/lamp/atom/service/operator/connection/insertConnection",method:"post",data:t})}}},455:function(t,e,n){"use strict";n.r(e);var i=n(456),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e.default=o.a},456:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(6)),o=n(152),a=c(n(415)),r=c(n(193)),u=c(n(428));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"operatorIndex",components:{SimplePopup:r.default},mixins:[a.default],data:function(){return{HTTPCommon:u.default}},created:function(){var t=[{title:"空间ID",key:"space_id",isNoEdit:!0},{title:"操作类型",key:"operation_type"},{title:"源类型",key:"connect_type",type:"select",attrs:{placeholder:"请选择操作类型"},options:[{label:"MYSQL",value:"MYSQL"},{label:"REDIS",value:"REDIS"}]},{title:"数据源名",key:"connect_name"},{title:"源数据地址",key:"connect_addr"},{title:"源登录账户",key:"connect_account"},{title:"源登录密码",key:"connect_password"},{title:"源登录空间",key:"connect_space"},{title:"模式",key:"mode"},{title:"集群模式",key:"colony_type",type:"select",attrs:{placeholder:"请选择集群模式"},options:[{label:"SINGLE",value:"SINGLE"},{label:"GROUP",value:"GROUP"}]},{title:"源数据配置",key:"source_conf"},{title:"源数据路径",key:"source_route"},{title:"源数据大小",key:"source_size"},{title:"源数据条数",key:"source_count"},{title:"创建时间",key:"createTime",width:160,isNoEdit:!0,formatter:function(t){return(0,o.parseTime)(t.createTime)||"-"}},{title:"更新时间",key:"updateTime",width:160,isNoEdit:!0,formatter:function(t){return(0,o.parseTime)(t.createTime)||"-"}}];this.tableInfo.columns=this.tableKeyToHump(t);var e=t.filter((function(t){return!t.isNoEdit}));this.editPopupInfo.form.items=e},methods:{modifyOrganization:function(t){var e=this,n=(0,i.default)({},t,{spaceId:this.searchFilter.spaceId});this.HTTPCommon.insertFn(n).then((function(t){e.$refs.editSimplePopup.handleClose(),e.$message.success("新增成功"),e.getList()})).catch((function(t){}))}}}},510:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-20 p-12 bg-white"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addPm}},[t._v("新增")]),t._v(" "),n("d2-crud",t._g(t._b({on:{"pagination-current-change":t.paginationCurrentChange}},"d2-crud",t.tableInfo,!1),t.tableInfo.events)),t._v(" "),t.editPopupInfo?n("simple-popup",t._g({ref:"editSimplePopup",attrs:{settings:t.editPopupInfo}},t.editPopupInfo.events)):t._e()],1)},o=[]}}]);