(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{410:function(e,t,a){"use strict";a.r(t);var n=a(512),i=a(459);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);var r=a(0),u=Object(r.a)(i.default,n.a,n.b,!1,null,null,null);t.default=u.exports},415:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(6)),i=o(a(20));function o(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){var e=this;return{searchFilter:{},tableInfo:{data:[],rowHandle:{fixed:"right",width:"90px",custom:[{text:"删除",type:"text",size:"mini",emit:"cutOff"}]},columns:[],pagination:{currentPage:1,pageSize:10,total:0,background:!0,layout:"total,-> , prev, pager, next"},events:{modify:function(t){e.$refs.editSimplePopup.handleCreate(JSON.parse((0,i.default)(t.row)))},otterEmit:function(t){e.otterEmitFn(t.row)},cutOff:function(t){e.$confirm("此操作将删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.HTTPCommon.updateFn({id:t.row.id,deleteFlag:1}).then((function(t){e.$message.success("操作成功"),e.getList()})).catch((function(e){}))})).catch((function(){}))},view:function(t){e.lookView(t)}}},editPopupInfo:{drawer:{attrs:{title:"新增",direction:"rtl"},events:{beforeClose:function(e){console.log("关闭弹框")}}},form:{width:"120px",inline:!0,items:[]},events:{confirm:function(t){console.log("修改点击确定按钮==>",t),e.modifyOrganization(t)},cancel:function(){e.$refs.editSimplePopup.handleClose()}}}}},created:function(){this.initParams()},mounted:function(){this.getList()},methods:{initParams:function(){var e=localStorage.getItem("organization");if(this.searchFilter={parentId:1},e){var t=JSON.parse(e);this.searchFilter.spaceId=t.id}},lookView:function(e){console.log(e)},paginationCurrentChange:function(e){this.tableInfo.pagination.currentPage=e,this.getList()},getList:function(){var e=this,t=(0,n.default)({},this.tableInfo.pagination,this.searchFilter);this.HTTPCommon.getList(t).then((function(t){e.tableInfo.pagination.total=t.total,e.tableInfo.pagination.currentPage=t.currentPage,e.tableInfo.pagination.pageSize=t.pageSize,e.tableInfo.data=t.data||[]}))},modifyOrganization:function(e){var t=this;this.HTTPCommon.insertFn(e).then((function(e){t.getList()})).catch((function(e){}))},addPm:function(){this.$refs.editSimplePopup.handleCreate()},tableKeyToHump:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.key=e.key.replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()})),e.minWidth=e.minWidth||"100",e.align=e.align||"center",e.isNoEdit||(e.label=e.label||e.title,e.props=e.props||e.key,e.type=e.type||"input"),(0,n.default)({},e)}))}}}},418:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=a(30),o=(n=i)&&n.__esModule?n:{default:n};t.default={getList:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/operator/queryOperators",method:"post",data:e})},updateFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/operator/updateOperator",method:"post",data:e})},insertFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/operator/insertOperator",method:"post",data:e})}}},425:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=a(30),o=(n=i)&&n.__esModule?n:{default:n};t.default={getList:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/node/queryNodes",method:"post",data:e})},updateFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/node/updateNode",method:"post",data:e})},insertFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/node/insertNode",method:"post",data:e})},insertRelation:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/node/createNodeRelation",method:"post",data:e})},queryNodeInformation:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/node/queryNodeInformation",method:"post",data:e})},updateNodeRelation:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/node/updateNodeRelation",method:"post",data:e})},startNodeTask:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/operator/startNodeTask",method:"post",data:e})}}},426:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=a(30),o=(n=i)&&n.__esModule?n:{default:n};t.default={getList:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/serviceInfo/queryServiceInfos",method:"post",data:e})},updateFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/serviceInfo/updateServiceInfo",method:"post",data:e})},insertFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/serviceInfo/insertServiceInfo",method:"post",data:e})}}},427:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=a(30),o=(n=i)&&n.__esModule?n:{default:n};t.default={getList:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/runtime/queryRuntimes",method:"post",data:e})},updateFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/runtime/updateRuntime",method:"post",data:e})},insertFn:function(e){return(0,o.default)({url:"/lamp/atom/service/operator/runtime/insertRuntime",method:"post",data:e})}}},459:function(e,t,a){"use strict";a.r(t);var n=a(460),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},460:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(6)),i=a(152),o=s(a(415)),r=s(a(192)),u=s(a(427)),l=s(a(425)),d=(s(a(418)),s(a(426)));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:"operatorIndex",components:{SimplePopup:r.default},mixins:[o.default],data:function(){return{HTTPCommon:u.default}},created:function(){var e=this,t=[{title:"运行实例ID",key:"id",isNoEdit:!0},{title:"空间id",key:"space_id",isNoEdit:!0},{title:"来源类型",key:"case_source_type",type:"select",attrs:{placeholder:"请选择来源类型"},options:[{label:"SERVICE",value:"SERVICE"},{label:"NODE",value:"NODE"}]},{title:"服务配置id",key:"source_id",type:"select",attrs:{placeholder:"请选择服务配置"},options:[]},{title:"节点id",key:"node_id",type:"select",attrs:{placeholder:"请选择节点"},options:[]},{title:"服务器IP",key:"server_ip"},{title:"服务器端口",key:"server_port"},{title:"开始时间",key:"start_time",width:160,type:"datetime",attrs:{placeholder:"请选择开始时间"},formatter:function(e){return(0,i.parseTime)(e.endTime)||"-"}},{title:"结束时间",key:"end_time",type:"datetime",attrs:{placeholder:"请选择结束时间"},width:160,formatter:function(e){return(0,i.parseTime)(e.endTime)||"-"}},{title:"预计开始时间",key:"estimate_start_time",attrs:{placeholder:"请选择预计开始时间"},type:"datetime",width:200,formatter:function(e){return(0,i.parseTime)(e.estimateStartTime)||"-"}},{title:"预计结束时间",key:"estimate_end_time",attrs:{placeholder:"请选择预计结束时间"},type:"datetime",width:200,formatter:function(e){return(0,i.parseTime)(e.estimateEndTime)||"-"}},{title:"运行状态",key:"operator_runtime_status",type:"select",attrs:{placeholder:"请选择运行状态"},options:[{label:"EDITING",value:"EDITING"},{label:"QUEUING",value:"QUEUING"},{label:"TRAINING",value:"TRAINING"},{label:"TESTING",value:"TESTING"},{label:"EDIT_CANCEL",value:"EDIT_CANCEL"},{label:"QUEUE_CANCEL",value:"QUEUE_CANCEL"},{label:"OCCUPYING",value:"OCCUPYING"},{label:"TRAIN_FINISH",value:"TRAIN_FINISH"},{label:"TRAIN_EXCEPTION",value:"TRAIN_EXCEPTION"},{label:"SERVICE_EXCEPTION",value:"SERVICE_EXCEPTION"}]},{title:"服务标签",key:"label"},{title:"启动人id",key:"start_id",width:120},{title:"启动人名",key:"start_name",width:120},{title:"关闭人id",key:"end_id",width:120},{title:"关闭人名",key:"end_name",width:120},{title:"创建时间",key:"createTime",width:160,isNoEdit:!0,formatter:function(e){return(0,i.parseTime)(e.createTime)||"-"}},{title:"更新时间",key:"updateTime",width:160,isNoEdit:!0,formatter:function(e){return(0,i.parseTime)(e.createTime)||"-"}}];this.tableInfo.columns=this.tableKeyToHump(t);var a=t.filter((function(e){return!e.isNoEdit}));this.editPopupInfo.form.items=a,l.default.getList({spaceId:this.searchFilter.spaceId}).then((function(t){e.editPopupInfo.form.items.find((function(e){return"nodeId"==e.key})).options=t.data&&t.data.map((function(e){return{label:e.nodeName+"("+e.id+")",value:e.id}}))||[]})),d.default.getList({spaceId:this.searchFilter.spaceId}).then((function(t){e.editPopupInfo.form.items.find((function(e){return"sourceId"==e.key})).options=t.data&&t.data.map((function(e){return{label:e.siName+"("+e.id+")",value:e.id}}))||[]}))},methods:{modifyOrganization:function(e){var t=this,a=(0,n.default)({},e,{spaceId:this.searchFilter.spaceId});this.HTTPCommon.insertFn(a).then((function(e){t.$refs.editSimplePopup.handleClose(),t.$message.success("新增成功"),t.getList()})).catch((function(e){}))}}}},512:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-20 p-12 bg-white"},[a("d2-crud",e._g(e._b({on:{"pagination-current-change":e.paginationCurrentChange}},"d2-crud",e.tableInfo,!1),e.tableInfo.events)),e._v(" "),e.editPopupInfo?a("simple-popup",e._g({ref:"editSimplePopup",attrs:{settings:e.editPopupInfo}},e.editPopupInfo.events)):e._e()],1)},i=[]}}]);